<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ó–∞–∫–∞–∑ –∫–æ—Ñ–µ</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f5f2;
      padding: 16px;
    }
    h2 {
      margin-top: 24px;
    }
    .card {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 12px;
    }
    button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      background: #6b4f3f;
      color: #fff;
      font-size: 16px;
      margin-top: 10px;
    }
    .secondary {
      background: #b89b8c;
    }
    .item {
      font-size: 14px;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>

<h2>‚òïÔ∏è –ö–∞–ø—É—á–∏–Ω–æ</h2>

<div class="card">
  <p><b>–û–±—ä—ë–º</b></p>
  <label><input type="radio" name="size" value="200"> 200 –º–ª</label><br>
  <label><input type="radio" name="size" value="300"> 300 –º–ª</label>

  <p style="margin-top:10px"><b>–ú–æ–ª–æ–∫–æ</b></p>
  <label><input type="checkbox" value="–û–≤—Å—è–Ω–æ–µ"> –û–≤—Å—è–Ω–æ–µ</label><br>
  <label><input type="checkbox" value="–ú–∏–Ω–¥–∞–ª—å–Ω–æ–µ"> –ú–∏–Ω–¥–∞–ª—å–Ω–æ–µ</label>

  <button onclick="addToCart('–ö–∞–ø—É—á–∏–Ω–æ')">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
</div>

<h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>
<div class="card" id="cart"></div>

<button class="secondary" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

<script>
  Telegram.WebApp.ready();

  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  function addToCart(name) {
    const size = document.querySelector('input[name="size"]:checked');
    if (!size) {
      alert('–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä—ë–º');
      return;
    }

    const milk = [];
    document.querySelectorAll('input[type="checkbox"]:checked').forEach(el => {
      milk.push(el.value);
    });

    const item = {
      name: name,
      size: size.value,
      milk: milk
    };

    cart.push(item);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
    alert('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É');
  }

  function renderCart() {
    const cartDiv = document.getElementById('cart');
    cartDiv.innerHTML = '';

    if (cart.length === 0) {
      cartDiv.innerHTML = '<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
      return;
    }

    cart.forEach((item, index) => {
      const div = document.createElement('div');
      div.className = 'item';
      div.textContent = `${index + 1}. ${item.name}, ${item.size} –º–ª${item.milk.length ? ', ' + item.milk.join(', ') : ''}`;
      cartDiv.appendChild(div);
    });
  }

  function checkout() {
    if (cart.length === 0) {
      alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
      return;
    }

    let text = '‚òïÔ∏è –ù–æ–≤—ã–π –∑–∞–∫–∞–∑:\n\n';
    cart.forEach((item, i) => {
      text += `${i + 1}. ${item.name}, ${item.size} –º–ª`;
      if (item.milk.length) text += ` (${item.milk.join(', ')})`;
      text += '\n';
    });

    Telegram.WebApp.sendData(text);
    localStorage.removeItem('cart');
    Telegram.WebApp.close();
  }

  renderCart();
</script>

</body>
</html>
